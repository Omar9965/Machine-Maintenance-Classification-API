{% extends "base.html" %}

{% block title %}{{ app_name }} â€” Result{% endblock %}

{% block content %}
<section class="result-section">
    <h1 class="page-title">Prediction Result</h1>

    <!-- Result Card -->
    <div class="result-card {% if prediction %}result-danger{% else %}result-safe{% endif %}">
        <div class="result-status">
            {% if prediction %}
            <div class="status-icon danger-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
            </div>
            <h2 class="status-text danger-text">Failure Predicted</h2>
            <p class="status-desc">The model indicates a high probability of machine failure. Immediate maintenance is recommended.</p>
            {% else %}
            <div class="status-icon safe-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
            </div>
            <h2 class="status-text safe-text">No Failure Detected</h2>
            <p class="status-desc">The model indicates normal operating conditions. Continue monitoring as scheduled.</p>
            {% endif %}
        </div>

        <!-- Probability Gauge -->
        <div class="probability-section">
            <h3>Failure Probability</h3>
            <div class="gauge-container">
                <div class="gauge-bar">
                    <div class="gauge-fill {% if probability > 0.8 %}gauge-danger{% elif probability > 0.5 %}gauge-warning{% else %}gauge-safe{% endif %}"
                         style="width: {{ (probability * 100)|round(1) }}%">
                    </div>
                </div>
                <div class="gauge-value">{{ (probability * 100)|round(2) }}%</div>
            </div>
            <div class="gauge-labels">
                <span>0%</span>
                <span class="threshold-label">Threshold: 81.2%</span>
                <span>100%</span>
            </div>
        </div>
    </div>

    <!-- Input Summary -->
    <div class="input-summary">
        <h3>Input Parameters</h3>
        <div class="summary-grid">
            {% for key, value in input_data.items() %}
            <div class="summary-item">
                <span class="summary-label">{{ key }}</span>
                <span class="summary-value">{{ value }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Actions -->
    <div class="result-actions">
        <a href="/predict" class="btn btn-primary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="1 4 1 10 7 10"/>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
            </svg>
            New Prediction
        </a>
        <a href="/" class="btn btn-secondary">Back to Home</a>
    </div>
</section>
{% endblock %}
